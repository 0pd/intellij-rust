apply plugin: 'java'

repositories {
    mavenCentral()
}

configurations {
    jflex
}

sourceCompatibility = 1.5

version = 0.1


dependencies {
    compile group: 'junit', name: 'junit', version: '4.+'
    jflex 'de.jflex:jflex:1.6.0'
}

def jflexArgs(srcFlex, targetDir) {
    return ["--skel", "src/org/rust/lang/core/lexer/RustLexer.skeleton",
            "-d", targetDir,
            srcFlex
    ]
}

task rustLexer(type: JavaExec) {
    main = "jflex.Main"
    args = jflexArgs("src/org/rust/lang/core/lexer/RustLexer.flex", "gen/org/rust/lang/core/lexer/")
    classpath configurations.jflex
}

task tomlLexer(type: JavaExec) {
    main = "jflex.Main"
    args = jflexArgs("src/org/toml/lang/core/lexer/TomlLexer.flex", "gen/org/toml/lang/core/lexer/")
    classpath configurations.jflex
}

task lexers() {
    dependsOn rustLexer, tomlLexer
}